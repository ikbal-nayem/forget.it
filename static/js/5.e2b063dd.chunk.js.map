{"version":3,"sources":["app/routes/Settings/server_actions.js","components/forms/Profile.jsx"],"names":["post","type","form_inputs","urls","change_password","Promise","resolve","reject","axios","then","resp","status","data","catch","err","console","log","response","patch","update_user_info","message","React","useState","loading","setLoading","authUser","useSelector","auth","dispatch","useDispatch","useForm","mode","defaultValues","register","control","handleSubmit","setError","errors","formState","className","onSubmit","toast","success","USER_DATA","payload","error","Object","keys","forEach","field","finally","noValidate","label","fullWidth","size","margin","disabled","required","autoFocus","first_name","inputProps","last_name","value","username","email","name","render","onChange","ref","inputRef","color","checked","labelPlacement","email_verified","severity","variant"],"mappings":"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","file":"static/js/5.e2b063dd.chunk.js","sourcesContent":["import axios from \"util/Api\";\r\n\r\n\r\nexport const post = (type, form_inputs)=>{\r\n  const urls = {\r\n    change_password: '/api/user/change-password',\r\n  }\r\n  return new Promise((resolve, reject)=>{\r\n    axios.post(urls[type], form_inputs)\r\n      .then(resp => resp.status === 200 && resolve(resp.data))\r\n      .catch(err=>{\r\n        console.log(err.response)\r\n        reject(err.response)\r\n      })\r\n  })\r\n}\r\n\r\n\r\nexport const patch = (type, form_inputs)=>{\r\n  const urls = {\r\n    update_user_info: '/api/user/user-info',\r\n  }\r\n  return new Promise((resolve, reject)=>{\r\n    axios.patch(urls[type], form_inputs)\r\n      .then(resp => resp.status === 200 && resolve(resp.data))\r\n      .catch(err=>{\r\n        console.log(err.message)\r\n        reject(err.response)\r\n      })\r\n  })\r\n}\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { TextField, Button, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { patch } from \"../../app/routes/Settings/server_actions\";\r\nimport { toast } from \"react-toastify\";\r\nimport { USER_DATA } from \"constants/ActionTypes\";\r\n\r\n\r\n// eslint-disable-next-line\r\nexport default () => {\r\n  const [loading, setLoading] = React.useState(false)\r\n  const {authUser} = useSelector(({auth}) => auth)\r\n  const dispatch = useDispatch();\r\n  const { register, control, handleSubmit, setError, formState: { errors } } = useForm({\r\n    mode: 'onChange',\r\n    defaultValues: authUser\r\n  });\r\n\r\n  const onSubmit = (data)=>{\r\n    setLoading(true)\r\n    patch('update_user_info', data)\r\n      .then(resp => {\r\n        toast.success('Information updated!')\r\n        dispatch({type: USER_DATA, payload: resp})\r\n      })\r\n      .catch(error => {\r\n        if(error.status === 400){\r\n          Object.keys(error.data).forEach(field=>{\r\n            if(field !== 'username'){\r\n              toast.error(error.data[field][0])\r\n              setError(field, {message: error.data[field][0]})\r\n            }\r\n          })\r\n        }\r\n      })\r\n      .finally(()=>setLoading(false))\r\n  }\r\n  \r\n  return (\r\n    <div className=\"p-3\">\r\n      <h3 className=\"mb-3 pb-2 border-bottom text-center\">User Information</h3>\r\n      <form onSubmit={handleSubmit(onSubmit)} noValidate>\r\n        <div className=\"form-row\">\r\n          <div className=\"col-sm-6\">\r\n            <TextField\r\n              label=\"First Name\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              disabled={loading}\r\n              required\r\n              autoFocus\r\n              error={!!errors.first_name}\r\n              inputProps={{ ...register(\"first_name\", { required: true }) }}\r\n            />\r\n          </div>\r\n          <div className=\"col-sm-6\">\r\n            <TextField\r\n              label=\"Last Name\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              disabled={loading}\r\n              required\r\n              error={!!errors.last_name}\r\n              inputProps={{ ...register(\"last_name\", { required: true }) }}\r\n            />\r\n          </div>\r\n          <div className=\"col-8\">\r\n            <TextField\r\n              label=\"Username\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              disabled\r\n              value={authUser.username}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"col-12\">\r\n            <TextField\r\n              label=\"Email\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              type=\"email\"\r\n              disabled={loading}\r\n              required\r\n              error={!!errors.email}\r\n              inputProps={{ ...register(\"email\", { required: true }) }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <Controller\r\n          control={control}\r\n          name=\"encrypt_pswds\"\r\n          render={({field: { onChange, value, ref }}) => (\r\n            <FormControlLabel\r\n              label=\"Encrypt Passwords\"\r\n              className=\"my-3 mx-0\"\r\n              onChange={onChange}\r\n              inputRef={ref}\r\n              disabled\r\n              control={<Switch size=\"small\" color=\"primary\" checked={!!value} />}\r\n              labelPlacement=\"start\"\r\n            />\r\n          )}\r\n        />\r\n\r\n        {!authUser.email_verified &&\r\n          <Alert className=\"w-100 py-0\" severity=\"warning\">Email is not verified! <strong>Verify now</strong></Alert>\r\n        }\r\n\r\n        <div className=\"my-3 d-flex align-items-center justify-content-center\">\r\n          <Button className=\"bg-gradient\" size=\"small\" type=\"submit\" variant=\"contained\" color=\"primary\" disabled={loading}>\r\n            Save\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}"],"sourceRoot":""}