{"version":3,"sources":["app/routes/Settings/server_actions.js","app/routes/Settings/Security.jsx"],"names":["post","type","form_inputs","urls","change_password","Promise","resolve","reject","axios","then","resp","status","data","catch","err","console","log","response","patch","update_user_info","message","React","useState","loading","setLoading","useForm","mode","register","handleSubmit","setError","reset","errors","formState","className","onSubmit","shouldFocus","toast","warning","success","error","warn","finally","noValidate","label","fullWidth","size","margin","disabled","required","current_password","inputProps","helperText","password","minLength","conf_password","variant","color"],"mappings":"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","file":"static/js/5.c3d4521d.chunk.js","sourcesContent":["import axios from \"util/Api\";\r\n\r\n\r\nexport const post = (type, form_inputs)=>{\r\n  const urls = {\r\n    change_password: '/api/user/change-password',\r\n  }\r\n  return new Promise((resolve, reject)=>{\r\n    axios.post(urls[type], form_inputs)\r\n      .then(resp => resp.status === 200 && resolve(resp.data))\r\n      .catch(err=>{\r\n        console.log(err.response)\r\n        reject(err.response)\r\n      })\r\n  })\r\n}\r\n\r\n\r\nexport const patch = (type, form_inputs)=>{\r\n  const urls = {\r\n    update_user_info: '/api/user/user-info',\r\n  }\r\n  return new Promise((resolve, reject)=>{\r\n    axios.patch(urls[type], form_inputs)\r\n      .then(resp => resp.status === 200 && resolve(resp.data))\r\n      .catch(err=>{\r\n        console.log(err.message)\r\n        reject(err.response)\r\n      })\r\n  })\r\n}\r\n","import { TextField, Button } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"react-toastify\";\r\nimport { post } from \"./server_actions\";\r\n\r\n\r\n// eslint-disable-next-line\r\nexport default () => {\r\n  const [loading, setLoading] = React.useState(false)\r\n  const { register, handleSubmit, setError, reset, formState: { errors } } = useForm({\r\n    mode: 'onChange'\r\n  });\r\n\r\n  const onSubmit = (data)=>{\r\n    if(data['password'] !== data['conf_password']){\r\n      setError('password', {message: 'Those passwords didn’t match.'})\r\n      setError('conf_password', {message: 'Those passwords didn’t match.'}, {shouldFocus: true})\r\n      toast.warning('Those passwords didn’t match. Try again.')\r\n    } else {\r\n      setLoading(true)\r\n      post('change_password', data)\r\n        .then(resp => {\r\n          toast.success('Password has been changed.')\r\n          reset({})\r\n        })\r\n        .catch(error => {\r\n          if(error.status === 400){\r\n            toast.warning(error.data.message)\r\n            setError('password', {message: error.data.message})\r\n            setError('conf_password', {message: error.data.message})\r\n          } else if(error.status === 401){\r\n            toast.warn(\"Wrong password! Try again.\")\r\n            setError('current_password', {message: error.data.message})\r\n          }\r\n        })\r\n        .finally(()=>setLoading(false))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-3\">\r\n      <h3 className=\"mb-3 pb-2 border-bottom text-center\">Change Password</h3>\r\n      <form onSubmit={handleSubmit(onSubmit)} noValidate>\r\n        <div className=\"form-row\">\r\n          <div className=\"col-12\">\r\n            <TextField\r\n              label=\"Current Password\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              type=\"password\"\r\n              disabled={loading}\r\n              required\r\n              error={!!errors.current_password}\r\n              inputProps={{ ...register(\"current_password\") }}\r\n            />\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <TextField\r\n              label=\"Password\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              type=\"password\"\r\n              disabled={loading}\r\n              required\r\n              helperText={!!errors.password && (errors.password?.message || 'Password should be atleast 8 digit.')}\r\n              error={!!errors.password}\r\n              inputProps={{ ...register(\"password\", { required: true, minLength: 8 }) }}\r\n            />\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <TextField\r\n              label=\"Confirm Password\"\r\n              fullWidth\r\n              size=\"small\"\r\n              margin=\"dense\"\r\n              type=\"password\"\r\n              disabled={loading}\r\n              required\r\n              helperText={!!errors.conf_password && (errors.conf_password?.message || 'Password should be atleast 8 digit.')}\r\n              error={!!errors.conf_password}\r\n              inputProps={{ ...register(\"conf_password\", { required: true, minLength: 8 }) }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"my-3 d-flex align-items-center justify-content-center\">\r\n          <Button size=\"small\" className=\"bg-gradient\" type=\"submit\" variant=\"contained\" color=\"primary\" disabled={loading}>\r\n            Change\r\n          </Button>\r\n        </div>\r\n\r\n      </form>\r\n    </div>\r\n  )\r\n}"],"sourceRoot":""}