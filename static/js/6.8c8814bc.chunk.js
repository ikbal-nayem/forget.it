(this["webpackJsonpforget.it"]=this["webpackJsonpforget.it"]||[]).push([[6],{273:function(e,t,n){"use strict";n.r(t);var a,r,c,i,l,s,o,d,u,j,f=n(20),b=n(25),m=n(0),h=n.n(m),p=n(16),x=n(271),O=n(242),g=n.n(O),v=n(260),y=n(204),w=n(275),N=n(258),E=n(256),C=n(257),S=n(224),k=n.n(S),L=n(261),P=n(262),z=n(255),_=Object(z.a)((function(e){return{root:{width:"100%",paddingBottom:15},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:"bold"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,marginLeft:10}}})),A=n(259),D=["title","titleId"];function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},q.apply(this,arguments)}function I(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function T(e,t){var n=e.title,f=e.titleId,b=I(e,D);return m.createElement("svg",q({id:"b21613c9-2bf0-4d37-bef0-3b193d34fc5d","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:647.63626,height:632.17383,viewBox:"0 0 647.63626 632.17383",ref:t,"aria-labelledby":f},b),n?m.createElement("title",{id:f},n):null,a||(a=m.createElement("path",{d:"M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z",transform:"translate(-276.18187 -133.91309)",fill:"#f2f2f2"})),r||(r=m.createElement("path",{d:"M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z",transform:"translate(-276.18187 -133.91309)",fill:"#3f3d56"})),c||(c=m.createElement("path",{d:"M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z",transform:"translate(-276.18187 -133.91309)",fill:"#fb7e3d"})),i||(i=m.createElement("circle",{cx:190.15351,cy:24.95465,r:20,fill:"#fb7e3d"})),l||(l=m.createElement("circle",{cx:190.15351,cy:24.95465,r:12.66462,fill:"#fff"})),s||(s=m.createElement("path",{d:"M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z",transform:"translate(-276.18187 -133.91309)",fill:"#e6e6e6"})),o||(o=m.createElement("path",{d:"M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z",transform:"translate(-276.18187 -133.91309)",fill:"#3f3d56"})),d||(d=m.createElement("path",{d:"M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z",transform:"translate(-276.18187 -133.91309)",fill:"#fb7e3d"})),u||(u=m.createElement("circle",{cx:433.63626,cy:105.17383,r:20,fill:"#fb7e3d"})),j||(j=m.createElement("circle",{cx:433.63626,cy:105.17383,r:12.18187,fill:"#fff"})))}var R=m.forwardRef(T),U=(n.p,n(2)),Z=function(e){return new URL(e).host};function B(e){var t=e.credential_list,n=e.handleList,a=e.formOpen,r=_(),c=h.a.useState(!1),i=Object(b.a)(c,2),l=i[0],s=i[1];return 0===t.length?Object(U.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(U.jsx)(R,{height:120,width:120,className:"mb-3 mt-5"}),Object(U.jsx)("h2",{className:"text-gradient animated slideInUp animation-duration-3",children:"No credentials found"})]}):Object(U.jsx)("div",{className:r.root,children:t.map((function(e,t){return Object(U.jsxs)(w.a,{expanded:l==="panel".concat(t),onChange:(c="panel".concat(t),function(e,t){return s(!!t&&c)}),children:[Object(U.jsxs)(E.a,{expandIcon:Object(U.jsx)(k.a,{}),"aria-controls":"panel1bh-content",children:[l!=="panel".concat(t)&&Object(U.jsx)("img",{width:22,height:22,alt:".",className:"mr-3 rounded-circle",src:"https://besticon-demo.herokuapp.com/icon?url=".concat(e.url,"&size=16..32..64&fallback_icon_color=fff")}),Object(U.jsx)(C.a,{className:"text-truncate ".concat(r.heading),children:e.title||Z(e.url)}),Object(U.jsx)(C.a,{className:r.secondaryHeading,children:Z(e.url)})]}),Object(U.jsx)(N.a,{children:Object(U.jsx)(H,{credential:e,handleList:n,formOpen:a})})]},e.id);var c}))})}var H=function(e){var t=e.credential,n=e.handleList,a=e.formOpen,r=h.a.useState(!1),c=Object(b.a)(r,2),i=c[0],l=c[1],s=new Date(t.added_on),o=s.toDateString().split(" ");return Object(U.jsxs)(A.a,{container:!0,spacing:2,children:[Object(U.jsx)(A.a,{item:!0,children:Object(U.jsx)("img",{width:80,height:80,alt:"logo",className:"rounded",src:"https://besticon-demo.herokuapp.com/icon?url=".concat(t.url,"&size=64..128..256&fallback_icon_color=fff")})}),Object(U.jsxs)(A.a,{item:!0,xs:12,sm:!0,container:!0,children:[Object(U.jsx)(A.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:Object(U.jsxs)(A.a,{item:!0,xs:!0,children:[Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)(C.a,{gutterBottom:!0,variant:"subtitle1",children:Object(U.jsx)(v.a,{href:t.url,target:"_blank",children:Z(t.url)})}),Object(U.jsxs)("small",{className:"text-muted text-center",children:[o[1]," ",o[2],", ",o[3],Object(U.jsx)("br",{}),s.toLocaleTimeString()]})]}),Object(U.jsxs)(C.a,{variant:"body2",gutterBottom:!0,children:["Username - ",Object(U.jsx)("strong",{className:"border rounded px-1",children:t.username})]}),Object(U.jsxs)(C.a,{variant:"body2",color:"textSecondary",children:["Password - ",Object(U.jsx)("strong",{className:"border rounded px-1",onDoubleClick:function(){return l(!i)},children:i?t.pswd:"########"})]})]})}),Object(U.jsx)(A.a,{item:!0,children:Object(U.jsxs)("div",{className:"d-flex flex-column",children:[Object(U.jsx)(y.a,{size:"small",color:"primary",onClick:function(){return a(t)},children:Object(U.jsx)(L.a,{})}),Object(U.jsx)(y.a,{size:"small",onClick:function(){return n("DELETE",t)},children:Object(U.jsx)(P.a,{color:"error"})})]})})]})]})},M=n(13),W=n(201),V=n(276),F=n(270),J=n(265),G=n(264),K=n(267),Q=n(268),X=n(269),Y=n(263),$=n(207),ee=n(266),te=n(56),ne=n(26),ae=n(36),re=n(80),ce=function(e,t){var n={add_credential:"/api/credentials/"};return new Promise((function(a,r){ae.a.post(n[e],t).then((function(e){return 201===e.status&&a(e.data)})).catch((function(e){console.log(e.message),ne.b.error("".concat(e.response.status," - ").concat(re.a[e.response.status])),r()}))}))},ie=function(e,t){var n={update_credential:"/api/credentials/".concat(t.id,"/")};return new Promise((function(a,r){ae.a.put(n[e],t).then((function(e){return 200===e.status&&a(e.data)})).catch((function(e){console.log(e.message),ne.b.error("".concat(e.response.status," - ").concat(re.a[e.response.status])),r()}))}))},le=function(e){return{render:e,type:"success",isLoading:!1,autoClose:3e3,theme:"dark"}},se=h.a.forwardRef((function(e,t){return Object(U.jsx)(Y.a,Object(M.a)({direction:"down",ref:t},e))}));function oe(e){var t=e.handleList,n=e.handleClose,a=e.open,r=e.update_data,c=h.a.useState(!1),i=Object(b.a)(c,2),l=i[0],s=i[1],o=Object(te.b)({defaultValues:{}}),d=o.register,u=o.control,j=o.formState.errors,f=o.getValues,m=o.setValue,p=o.handleSubmit,x=o.reset;h.a.useEffect((function(){x(Object(M.a)({},r.current))}),[a,r,x]);var O=h.a.useCallback((function(e){var t;!f().title&&e.target.value&&(t=e.target.value,new Promise((function(e,n){ae.a.get("http://textance.herokuapp.com/title/".concat(t)).then((function(t){return 200===t.status?e(t.data):n()})).catch((function(e){return console.log(e.message)}))}))).then((function(e){return m("title",e)}))}),[m,f]);return Object(U.jsxs)(V.a,{open:a,TransitionComponent:se,onClose:n,"aria-labelledby":"credential-form",children:[Object(U.jsxs)(G.a,{id:"credential-form",className:"text-center",children:[r.current.id?"Update":"Add New"," Credential"]}),Object(U.jsxs)("form",{onSubmit:p((function(e){var a=ne.b.loading("Saving, Please wait..."),c=r.current.id?ie:ce;s(!0),c(r.current.id?"update_credential":"add_credential",e).then((function(e){ne.b.update(a,le("Credential saved.")),t(r.current.id?"UPDATE":"ADD",e),n()})).catch((function(){return ne.b.update(a,{render:"Could not save the credential!",type:"warning",isLoading:!1,autoClose:5e3,theme:"dark"})})).finally((function(){s(!1)}))})),children:[Object(U.jsxs)(J.a,{children:[Object(U.jsx)("div",{className:"form-row",children:Object(U.jsx)("div",{className:"col-12",children:Object(U.jsx)(te.a,{control:u,name:"title",render:function(e){var t=e.field,n=t.onChange,a=t.value;return Object(U.jsx)($.a,{label:"Title",size:"small",fullWidth:!0,disabled:l,margin:"normal",onChange:n,value:a||""})}})})}),Object(U.jsx)("div",{className:"form-row",children:Object(U.jsx)("div",{className:"col-12",children:Object(U.jsx)($.a,{label:"Website URL",size:"small",fullWidth:!0,placeholder:"www.example.com",type:"url",margin:"normal",required:!0,autoFocus:!0,disabled:l,onBlur:O,error:!!j.url,inputProps:Object(M.a)(Object(M.a)({},d("url",{required:!0})),{},{required:""}),InputProps:{endAdornment:Object(U.jsx)(ee.a,{position:"end",children:Object(U.jsx)(K.a,{})})}})})}),Object(U.jsxs)("div",{className:"form-row",children:[Object(U.jsx)("div",{className:"col-6",children:Object(U.jsx)($.a,{label:"Username",size:"small",margin:"normal",fullWidth:!0,required:!0,disabled:l,error:!!j.username,inputProps:Object(M.a)(Object(M.a)({},d("username",{required:!0})),{},{required:""}),InputProps:{endAdornment:Object(U.jsx)(ee.a,{position:"end",children:Object(U.jsx)(Q.a,{})})}})}),Object(U.jsx)("div",{className:"col-6",children:Object(U.jsx)($.a,{label:"Password",size:"small",margin:"normal",fullWidth:!0,required:!0,disabled:l,error:!!j.pswd,inputProps:Object(M.a)(Object(M.a)({},d("pswd",{required:!0})),{},{required:""}),InputProps:{endAdornment:Object(U.jsx)(ee.a,{position:"end",children:Object(U.jsx)(X.a,{})})}})})]})]}),Object(U.jsxs)(F.a,{className:"justify-content-center",children:[Object(U.jsx)(W.a,{onClick:n,size:"small",color:"primary",disabled:l,children:"Cancel"}),Object(U.jsx)(W.a,{type:"submit",size:"small",color:"primary",variant:"contained",disabled:l,children:"Submit"})]})]})]})}var de=function(e){var t=e.text;return Object(U.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"calc(100vh - 200px)"},children:[Object(U.jsx)("div",{className:"search-loading-icon"}),Object(U.jsx)("h3",{className:"search-loading-text text-muted mt-4",children:t||"Searching..."})]})},ue=n(226),je=function(e){return Object(U.jsx)(ue.Scrollbars,Object(M.a)(Object(M.a)({},e),{},{autoHide:!0,renderTrackHorizontal:function(e){return Object(U.jsx)("div",Object(M.a)(Object(M.a)({},e),{},{style:{display:"none"}}))}}))};t.default=function(){var e=Object(p.e)((function(e){return e.search.query})),t=h.a.useState(!1),n=Object(b.a)(t,2),a=n[0],r=n[1],c=h.a.useState(!0),i=Object(b.a)(c,2),l=i[0],s=i[1],o=h.a.useState([]),d=Object(b.a)(o,2),u=d[0],j=d[1],m=h.a.useRef([]),O=h.a.useRef({});h.a.useEffect((function(){ae.a.get("/api/credentials").then((function(e){200===e.status&&(m.current=e.data,j(e.data))})).catch((function(e){Object(ne.b)(e.response?re.a[e.response.status]:e.message)})).finally((function(){return s(!1)}))}),[]);var v=function(e){O.current=e.id?e:{},r(!0)},y=function(e,t){if("ADD"===e)m.current=[].concat(Object(f.a)(u),[t]),j(m.current);else if("UPDATE"===e){var n=u.findIndex((function(e){return e.id===t.id}));u[n]=t,m.current=Object(f.a)(u),j(Object(f.a)(u))}else if("DELETE"===e){var a=ne.b.loading("Deleting credential...");(function(e,t){var n={delete_credential:"/api/credentials/".concat(t,"/")};return new Promise((function(t,a){ae.a.delete(n[e]).then((function(e){return 204===e.status&&t()})).catch((function(e){console.log(e.message),ne.b.error("".concat(e.response.status," - ").concat(re.a[e.response.status])),a()}))}))})("delete_credential",t.id).then((function(e){ne.b.update(a,le("Credential deleted.")),m.current=Object(f.a)(u.filter((function(e){return e.id!==t.id}))),j(m.current)})).catch((function(){return ne.b.update(a,{render:"Credential could not delete!",type:"error",isLoading:!1,autoClose:5e3,theme:"dark"})}))}};return h.a.useEffect((function(){var t=m.current.filter((function(t){return["title","url"].some((function(n){var a;return null===(a=t[n])||void 0===a?void 0:a.toLowerCase().includes(e||"")}))}));j(Object(f.a)(t))}),[e]),Object(U.jsxs)(h.a.Fragment,{children:[Object(U.jsx)(je,{children:Object(U.jsx)("div",{className:"app-wrapper container",children:l?Object(U.jsx)(de,{text:"Looking for credentials..."}):Object(U.jsx)(B,{credential_list:u,formOpen:v,handleList:y})})}),Object(U.jsx)(x.a,{size:"medium",className:"bg-gradient text-white position-fixed animated zoomIn",onClick:v,style:{bottom:20,right:20},children:Object(U.jsx)(g.a,{fontSize:"large"})}),Object(U.jsx)(oe,{update_data:O,handleList:y,handleClose:function(){return r(!1)},open:a})]})}}}]);
//# sourceMappingURL=6.8c8814bc.chunk.js.map