{"version":3,"sources":["app/routes/Settings/server_actions.js","components/forms/Profile.jsx"],"names":["post","type","form_inputs","urls","change_password","Promise","resolve","reject","axios","then","resp","status","data","catch","err","console","log","response","patch","update_user_info","message","React","useState","loading","setLoading","authUser","useSelector","auth","dispatch","useDispatch","useForm","mode","defaultValues","register","control","handleSubmit","setError","errors","formState","className","onSubmit","toast","success","USER_DATA","payload","error","Object","keys","forEach","field","finally","noValidate","label","fullWidth","size","margin","disabled","required","autoFocus","first_name","inputProps","last_name","value","username","email","name","render","onChange","ref","inputRef","color","checked","labelPlacement","email_verified","severity","variant"],"mappings":"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","file":"static/js/5.ee480fce.chunk.js","sourcesContent":["import axios from \"util/Api\";\n\n\nexport const post = (type, form_inputs)=>{\n  const urls = {\n    change_password: '/api/user/change-password',\n  }\n  return new Promise((resolve, reject)=>{\n    axios.post(urls[type], form_inputs)\n      .then(resp => resp.status === 200 && resolve(resp.data))\n      .catch(err=>{\n        console.log(err.response)\n        reject(err.response)\n      })\n  })\n}\n\n\nexport const patch = (type, form_inputs)=>{\n  const urls = {\n    update_user_info: '/api/user/user-info',\n  }\n  return new Promise((resolve, reject)=>{\n    axios.patch(urls[type], form_inputs)\n      .then(resp => resp.status === 200 && resolve(resp.data))\n      .catch(err=>{\n        console.log(err.message)\n        reject(err.response)\n      })\n  })\n}\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { TextField, Button, FormControlLabel, Switch } from \"@material-ui/core\";\nimport Alert from '@material-ui/lab/Alert';\nimport { useForm, Controller } from \"react-hook-form\";\nimport { patch } from \"../../app/routes/Settings/server_actions\";\nimport { toast } from \"react-toastify\";\nimport { USER_DATA } from \"constants/ActionTypes\";\n\n\n// eslint-disable-next-line\nexport default () => {\n  const [loading, setLoading] = React.useState(false)\n  const {authUser} = useSelector(({auth}) => auth)\n  const dispatch = useDispatch();\n  const { register, control, handleSubmit, setError, formState: { errors } } = useForm({\n    mode: 'onChange',\n    defaultValues: authUser\n  });\n\n  const onSubmit = (data)=>{\n    setLoading(true)\n    patch('update_user_info', data)\n      .then(resp => {\n        toast.success('Information updated!')\n        dispatch({type: USER_DATA, payload: resp})\n      })\n      .catch(error => {\n        if(error.status === 400){\n          Object.keys(error.data).forEach(field=>{\n            if(field !== 'username'){\n              toast.error(error.data[field][0])\n              setError(field, {message: error.data[field][0]})\n            }\n          })\n        }\n      })\n      .finally(()=>setLoading(false))\n  }\n  \n  return (\n    <div className=\"p-3\">\n      <h3 className=\"mb-3 pb-2 border-bottom text-center\">User Information</h3>\n      <form onSubmit={handleSubmit(onSubmit)} noValidate>\n        <div className=\"form-row\">\n          <div className=\"col-sm-6\">\n            <TextField\n              label=\"First Name\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              disabled={loading}\n              required\n              autoFocus\n              error={!!errors.first_name}\n              inputProps={{ ...register(\"first_name\", { required: true }) }}\n            />\n          </div>\n          <div className=\"col-sm-6\">\n            <TextField\n              label=\"Last Name\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              disabled={loading}\n              required\n              error={!!errors.last_name}\n              inputProps={{ ...register(\"last_name\", { required: true }) }}\n            />\n          </div>\n          <div className=\"col-8\">\n            <TextField\n              label=\"Username\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              disabled\n              value={authUser.username}\n            />\n          </div>\n        </div>\n        <div className=\"form-row\">\n          <div className=\"col-12\">\n            <TextField\n              label=\"Email\"\n              fullWidth\n              size=\"small\"\n              margin=\"dense\"\n              type=\"email\"\n              disabled={loading}\n              required\n              error={!!errors.email}\n              inputProps={{ ...register(\"email\", { required: true }) }}\n            />\n          </div>\n        </div>\n        <Controller\n          control={control}\n          name=\"encrypt_pswds\"\n          render={({field: { onChange, value, ref }}) => (\n            <FormControlLabel\n              label=\"Encrypt Passwords\"\n              className=\"my-3 mx-0\"\n              onChange={onChange}\n              inputRef={ref}\n              disabled\n              control={<Switch size=\"small\" color=\"primary\" checked={!!value} />}\n              labelPlacement=\"start\"\n            />\n          )}\n        />\n\n        {!authUser.email_verified &&\n          <Alert className=\"w-100 py-0\" severity=\"warning\">Email is not verified! <strong>Verify now</strong></Alert>\n        }\n\n        <div className=\"my-3 d-flex align-items-center justify-content-center\">\n          <Button className=\"bg-gradient\" size=\"small\" type=\"submit\" variant=\"contained\" color=\"primary\" disabled={loading}>\n            Save\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}"],"sourceRoot":""}